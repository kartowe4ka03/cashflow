<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–î–î–° ‚Äî –°–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
<h1>–î–≤–∏–∂–µ–Ω–∏–µ –î–µ–Ω–µ–∂–Ω—ã—Ö –°—Ä–µ–¥—Å—Ç–≤</h1>

<a href="{% url 'dds_create' %}" class="btn btn-success mb-2">‚ûï –°–æ–∑–¥–∞—Ç—å</a>
<a href="{% url 'refs_home' %}" class="btn btn-secondary mb-2">üìö –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏</a>

<form method="get" class="row g-2 mb-3">
    <div class="col"><input type="date" name="date_from" value="{{ filters.date_from }}" class="form-control" placeholder="–° –¥–∞—Ç—ã"></div>
    <div class="col"><input type="date" name="date_to" value="{{ filters.date_to }}" class="form-control" placeholder="–ü–æ –¥–∞—Ç—É"></div>
    <div class="col">
        <select name="type" class="form-select">
            <option value="">–¢–∏–ø</option>
            {% for t in types %}
                <option value="{{ t.id }}" {% if t.id|stringformat:"s" == filters.type %}selected{% endif %}>{{ t.name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col">
        <select name="status" class="form-select">
            <option value="">–°—Ç–∞—Ç—É—Å</option>
            {% for s in statuses %}
                <option value="{{ s.id }}" {% if s.id|stringformat:"s" == filters.status %}selected{% endif %}>{{ s.name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col">
        <select name="category" class="form-select">
            <option value="">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</option>
            {% for c in categories %}
                <option value="{{ c.id }}" {% if c.id|stringformat:"s" == filters.category %}selected{% endif %}>{{ c.name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col">
        <select name="subcategory" class="form-select">
            <option value="">–ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è</option>
            {% for sc in subcategories %}
                <option value="{{ sc.id }}" {% if sc.id|stringformat:"s" == filters.subcategory %}selected{% endif %}>{{ sc.name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col">
        <button type="submit" class="btn btn-primary">–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
    </div>
</form>
        
<table class="table table-bordered table-striped">
    <thead>
    <tr>
        <th>–î–∞—Ç–∞</th>
        <th>–¢–∏–ø</th>
        <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
        <th>–ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
        <th>–°—É–º–º–∞</th>
        <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
    </tr>
    </thead>
    <tbody>
    {% for r in records %}
        <tr>
            <td>{{ r.created_at }}</td>
            <td>{{ r.type.name }}</td>
            <td>{{ r.category.name }}</td>
            <td>{{ r.subcategory.name }}</td>
            <td>{{ r.status.name }}</td>
            <td>{{ r.amount }}</td>
            <td>{{ r.comment|default:"‚Äî" }}</td>
            <td>
                <a href="{% url 'dds_edit' r.pk %}" class="btn btn-sm btn-outline-primary">‚úèÔ∏è</a>
                <a href="{% url 'dds_delete' r.pk %}" class="btn btn-sm btn-outline-danger">üóëÔ∏è</a>
            </td>
        </tr>
    {% empty %}
        <tr><td colspan="7" class="text-center">–ó–∞–ø–∏—Å–µ–π –Ω–µ—Ç</td></tr>
    {% endfor %}
    </tbody>
</table>
</body>
</html>
